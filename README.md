# Скрипт пересылки сообщений из Telegram-каналов

Этот скрипт на Python автоматизирует процесс мониторинга каналов в Телеграме, на которые вы подписаны, фильтрации сообщений по заданным ключевым словам и пересылки соответствующих сообщений в указанный целевой канал.

## Как это работает

### 1. Инициализация
Скрипт инициализирует клиент Telethon с использованием предоставленных `api_id`, `api_hash` и `phone`. Величины `api_id`, `api_hash` можно получить [тут](https://my.telegram.org/auth?to=apps), создав приложение.

### 2. Получение последнего сообщения
Скрипт извлекает последнее сообщение из целевого канала, чтобы определить время отсечки для пересылки. Это позволяет избежать пересылки старых сообщений.

### 3. Перебор каналов
Скрипт перебирает все подписанные каналы, исключая целевой канал. 

### 4. Фильтрация и пересылка
- **Фильтрация**: Сообщения проверяются на содержание любого из указанных ключевых слов. Также время отправки сообщения должно быть позже последнего сообщения в канале назначения.
- **Дублирование**: Проверяется, было ли сообщение уже переслано ранее в этой сессии, чтобы избежать дублирования.
- **Пересылка**: Если сообщение проходит фильтр и не является дубликатом, оно пересылается в целевой канал.
- **Ограничения**: Если пересылка сообщения ограничена, то отправляется ссылка на сообщение.

### 5. Обработка ошибок
- **FloodWaitError**: Скрипт обрабатывает ошибки, связанные с ограничениями по скорости, приостанавливая выполнение на необходимое время.
- **ChatForwardsRestrictedError**: Если пересылка сообщения ограничена, отправляется ссылка на сообщение.

## Настройка

### Учетные данные API
Убедитесь, что ваш `api_id` и `api_hash` хранятся в безопасности и не публикуются.

### Номер телефона
Номер телефона должен быть в международном формате и должен быть зарегистрирован в Telegram.

### Целевой канал
Целевой канал должен быть доступен для Telegram-аккаунта, используемого для скрипта, и аккаунт должен иметь возможность отправлять сообщения в целевой канал.

### Ключевые слова
Настройте `KEYWORDS` в файле `.env` в соответствии с вашими потребностями фильтрации.

## Примечания

### Файл сессии
Скрипт создает файл `my_session.session` для хранения информации о сессии. Не делитесь этим файлом.

### Ограничение запросов
Будьте внимательны к ограничениям запросов для Telegram. Чрезмерные запросы могут привести к временным блокировкам.
